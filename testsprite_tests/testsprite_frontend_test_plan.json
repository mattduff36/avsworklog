[
  {
    "id": "TC001",
    "title": "Authentication success with valid employee credentials",
    "description": "Verify that an employee can successfully authenticate using Supabase Auth and land on the dashboard with appropriate permissions restricting visible features.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Navigate to login page"
      },
      {
        "type": "action",
        "description": "Input valid employee username and password"
      },
      {
        "type": "action",
        "description": "Click login button"
      },
      {
        "type": "assertion",
        "description": "Verify login success and redirect to dashboard"
      },
      {
        "type": "assertion",
        "description": "Verify dashboard displays features allowed for employee role only"
      }
    ]
  },
  {
    "id": "TC002",
    "title": "Workshop task creation with two-tier taxonomy",
    "description": "Check the ability to create a new workshop task selecting category and subcategory with correct hierarchical options and UI styling (colors, icons, badges).",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Login as employee and navigate to Workshop Tasks page"
      },
      {
        "type": "action",
        "description": "Click 'Create New Task' button"
      },
      {
        "type": "action",
        "description": "Enter valid task details including selecting a top-level category"
      },
      {
        "type": "action",
        "description": "Select an appropriate subcategory dynamically filtered based on category"
      },
      {
        "type": "assertion",
        "description": "Verify category and subcategory badges appear correctly with colors and icons"
      },
      {
        "type": "action",
        "description": "Submit the new task"
      },
      {
        "type": "assertion",
        "description": "Verify the task is created and appears in the tasks list with correct taxonomy"
      }
    ]
  },
  {
    "id": "TC003",
    "title": "Workshop task comments timeline CRUD for author",
    "description": "Verify a user can add, edit, and delete comments on a workshop task timeline maintaining author verification and timestamps.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Login as employee and open an existing workshop task"
      },
      {
        "type": "action",
        "description": "Add a new comment with at least 10 characters"
      },
      {
        "type": "assertion",
        "description": "Verify comment appears instantly in timeline with correct author and timestamp"
      },
      {
        "type": "action",
        "description": "Edit the comment text"
      },
      {
        "type": "assertion",
        "description": "Verify timeline reflects edited comment with updated timestamp"
      },
      {
        "type": "action",
        "description": "Delete the comment"
      },
      {
        "type": "assertion",
        "description": "Verify comment is removed from timeline instantly"
      }
    ]
  },
  {
    "id": "TC004",
    "title": "Manager admin override for deleting others' comments",
    "description": "Verify that managers and admins can delete comments authored by others on the workshop task comments timeline successfully.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Login as manager or admin"
      },
      {
        "type": "action",
        "description": "Open a workshop task containing comments from other users"
      },
      {
        "type": "action",
        "description": "Attempt to delete a comment not authored by current user"
      },
      {
        "type": "assertion",
        "description": "Verify comment is deleted and removed from timeline"
      },
      {
        "type": "action",
        "description": "Attempt to edit a comment not authored by current user"
      },
      {
        "type": "assertion",
        "description": "Verify editing is not permitted (UI disabled or error returned)"
      }
    ]
  },
  {
    "id": "TC005",
    "title": "Two-tier taxonomy dynamic subcategory filtering",
    "description": "Verify that upon selecting a category, only the related subcategories are displayed and selectable across all relevant UI components.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Navigate to workshop task creation or editing page"
      },
      {
        "type": "action",
        "description": "Select first category (e.g., Service)"
      },
      {
        "type": "assertion",
        "description": "Verify only subcategories related to Service are displayed"
      },
      {
        "type": "action",
        "description": "Change category to another (e.g., Repair)"
      },
      {
        "type": "assertion",
        "description": "Verify subcategory list updates accordingly"
      },
      {
        "type": "action",
        "description": "Verify badges, colors, and icons update accordingly for selected taxonomy"
      }
    ]
  },
  {
    "id": "TC006",
    "title": "Fleet page tab navigation and data loading",
    "description": "Ensure the Fleet page tabs (Maintenance, Vehicles, Categories, Settings) load their respective data within 2 seconds and respect user role permissions.",
    "category": "performance",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Login as manager"
      },
      {
        "type": "action",
        "description": "Navigate to Fleet page"
      },
      {
        "type": "assertion",
        "description": "Verify Maintenance tab loads maintenance data in under 2 seconds"
      },
      {
        "type": "action",
        "description": "Switch to Vehicles tab"
      },
      {
        "type": "assertion",
        "description": "Verify vehicle master data loads under 2 seconds"
      },
      {
        "type": "action",
        "description": "Switch to Categories tab"
      },
      {
        "type": "assertion",
        "description": "Verify category data loads correctly"
      },
      {
        "type": "action",
        "description": "Switch to Settings tab"
      },
      {
        "type": "assertion",
        "description": "Verify settings data shown with appropriate permissions"
      },
      {
        "type": "assertion",
        "description": "Verify tabs not allowed for employees are hidden"
      }
    ]
  },
  {
    "id": "TC007",
    "title": "Vehicle History page displays accurate maintenance and MOT data",
    "description": "Verify the vehicle history page correctly displays maintenance records integrated with workshop comments and taxonomy badges, as well as MOT history.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Login as manager or employee"
      },
      {
        "type": "action",
        "description": "Navigate to a specific vehicle's History page"
      },
      {
        "type": "assertion",
        "description": "Verify Maintenance tab shows accurate records with related workshop task comments timeline and taxonomy badges"
      },
      {
        "type": "action",
        "description": "Switch to MOT tab"
      },
      {
        "type": "assertion",
        "description": "Verify accurate MOT history is loaded and displayed"
      },
      {
        "type": "action",
        "description": "Switch to Documents and Notes tabs"
      },
      {
        "type": "assertion",
        "description": "Verify Documents and Notes placeholders are present"
      }
    ]
  },
  {
    "id": "TC008",
    "title": "Role-based access control enforcement for vehicle master data",
    "description": "Verify that only managers and admins can access, modify, or delete vehicle master data while employees receive HTTP 403 errors when attempting unauthorized actions.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Login as employee"
      },
      {
        "type": "action",
        "description": "Attempt to access vehicle master data endpoints or UI"
      },
      {
        "type": "assertion",
        "description": "Verify access is denied and appropriate error shown or HTTP 403 returned"
      },
      {
        "type": "action",
        "description": "Login as manager"
      },
      {
        "type": "action",
        "description": "Access vehicle master data page and attempt edits"
      },
      {
        "type": "assertion",
        "description": "Verify edits succeed and changes reflected"
      }
    ]
  },
  {
    "id": "TC009",
    "title": "Timesheet submission and manager approval workflow",
    "description": "Verify employees can submit timesheets and managers can approve, adjust, reject with correct data integrity and audit trail.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Login as employee and create a new timesheet entry with valid data"
      },
      {
        "type": "action",
        "description": "Submit the timesheet"
      },
      {
        "type": "assertion",
        "description": "Verify timesheet is submitted and visible in manager's approval queue"
      },
      {
        "type": "action",
        "description": "Login as manager and review timesheet"
      },
      {
        "type": "action",
        "description": "Approve the timesheet"
      },
      {
        "type": "assertion",
        "description": "Verify timesheet status updated to approved"
      },
      {
        "type": "action",
        "description": "Adjust the timesheet hours and save"
      },
      {
        "type": "assertion",
        "description": "Verify adjustments persist accurately"
      },
      {
        "type": "action",
        "description": "Reject the timesheet with reason"
      },
      {
        "type": "assertion",
        "description": "Verify timesheet status is rejected and employee notified"
      }
    ]
  },
  {
    "id": "TC010",
    "title": "Digital vehicle inspection form defect submission and PDF export",
    "description": "Verify users can submit vehicle inspection forms with defects, generate compliance reports, and export PDFs correctly.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Login as employee and navigate to vehicle inspections page"
      },
      {
        "type": "action",
        "description": "Create a new inspection form and enter defect details"
      },
      {
        "type": "action",
        "description": "Submit the inspection form"
      },
      {
        "type": "assertion",
        "description": "Verify inspection data saved properly"
      },
      {
        "type": "action",
        "description": "Generate compliance report"
      },
      {
        "type": "assertion",
        "description": "Verify report data matches defects submitted"
      },
      {
        "type": "action",
        "description": "Export inspection form to PDF"
      },
      {
        "type": "assertion",
        "description": "Verify PDF contains accurate inspection and defect information"
      }
    ]
  },
  {
    "id": "TC011",
    "title": "RAMS digital signature workflow with export and email",
    "description": "Verify risk assessment method statements support digital signature capture, visitor acknowledgments, PDF export, and email distribution.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Login as manager and navigate to RAMS page"
      },
      {
        "type": "action",
        "description": "Create a new RAMS entry, fill required fields"
      },
      {
        "type": "action",
        "description": "Add digital signature and visitor sign-offs"
      },
      {
        "type": "assertion",
        "description": "Verify signatures are captured and saved"
      },
      {
        "type": "action",
        "description": "Export RAMS as PDF"
      },
      {
        "type": "assertion",
        "description": "Verify PDF accuracy"
      },
      {
        "type": "action",
        "description": "Send RAMS email distribution"
      },
      {
        "type": "assertion",
        "description": "Verify email sent success status and correct recipients"
      }
    ]
  },
  {
    "id": "TC012",
    "title": "Internal messaging blocking message dismissal and notifications",
    "description": "Verify users receive blocking messages (e.g., mandatory password change), can dismiss non-mandatory messages, and notifications are tracked correctly.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Login as employee with active blocking message"
      },
      {
        "type": "assertion",
        "description": "Verify blocking message displays preventing further actions"
      },
      {
        "type": "action",
        "description": "Attempt to dismiss blocking message"
      },
      {
        "type": "assertion",
        "description": "Verify mandatory messages cannot be dismissed"
      },
      {
        "type": "action",
        "description": "Login as employee with non-mandatory messages"
      },
      {
        "type": "action",
        "description": "Dismiss blocking message"
      },
      {
        "type": "assertion",
        "description": "Verify dismissal recorded and message removed"
      },
      {
        "type": "action",
        "description": "Verify notifications count updates accordingly"
      }
    ]
  },
  {
    "id": "TC013",
    "title": "Offline support functionality with service worker and data sync",
    "description": "Verify PWA offline support including caching, pull-to-refresh, and background data synchronization operate correctly with no data losses or UI errors.",
    "category": "functional",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Access app with internet connection and cache resources via service worker"
      },
      {
        "type": "action",
        "description": "Turn off network connectivity"
      },
      {
        "type": "action",
        "description": "Perform actions like creating workshop task comments and navigating pages"
      },
      {
        "type": "assertion",
        "description": "Verify UI works seamlessly without connection errors"
      },
      {
        "type": "action",
        "description": "Pull-to-refresh to trigger data sync"
      },
      {
        "type": "action",
        "description": "Reconnect network"
      },
      {
        "type": "assertion",
        "description": "Verify offline changes synchronize to backend successfully"
      }
    ]
  },
  {
    "id": "TC014",
    "title": "Database migration script execution without data loss",
    "description": "Verify all database migrations including workshop task comments and taxonomy run successfully, updating legacy data correctly without data loss.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Execute all new migration scripts on test database"
      },
      {
        "type": "assertion",
        "description": "Verify migrations complete without errors"
      },
      {
        "type": "assertion",
        "description": "Verify legacy data is correctly backfilled"
      },
      {
        "type": "assertion",
        "description": "Verify data integrity is maintained with triggers and RLS policies in place"
      }
    ]
  },
  {
    "id": "TC015",
    "title": "Deprecated fleet routes redirect seamlessly with correct URLs",
    "description": "Verify when accessing deprecated fleet routes, users are redirected without content flashes and end up on appropriate new pages.",
    "category": "functional",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Attempt to navigate to deprecated fleet or vehicle management routes manually"
      },
      {
        "type": "assertion",
        "description": "Verify user is redirected smoothly to updated consolidated Fleet page or Vehicle History page"
      },
      {
        "type": "assertion",
        "description": "Verify no content flash or layout flickering during redirect"
      },
      {
        "type": "assertion",
        "description": "Verify URL is correct and final page displays accurately"
      }
    ]
  },
  {
    "id": "TC016",
    "title": "Input validation on workshop task comments minimum length",
    "description": "Verify that workshop task comments require a minimum of 10 characters and longer inputs and edge cases are validated properly.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Open workshop task comments input"
      },
      {
        "type": "action",
        "description": "Enter a comment with less than 10 characters"
      },
      {
        "type": "assertion",
        "description": "Verify client-side validation error occurs and prevents submission"
      },
      {
        "type": "action",
        "description": "Enter a valid comment with exactly 10 characters"
      },
      {
        "type": "assertion",
        "description": "Verify comment accepts input and can be submitted successfully"
      }
    ]
  },
  {
    "id": "TC017",
    "title": "UI responsiveness across desktop, tablet, and mobile",
    "description": "Verify the entire dashboard UI including workshop tasks, fleet, vehicle history pages render correctly across supported devices with no layout breakage or visual regressions.",
    "category": "ui",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Open application on desktop browser with large screen"
      },
      {
        "type": "assertion",
        "description": "Verify all UI components render correctly, layout is stable"
      },
      {
        "type": "action",
        "description": "Repeat validation on tablet viewport size"
      },
      {
        "type": "assertion",
        "description": "Verify responsive menu, tab navigation, and content scales properly"
      },
      {
        "type": "action",
        "description": "Repeat validation on mobile viewport size"
      },
      {
        "type": "assertion",
        "description": "Verify mobile navigation (hamburger menu) works, tab content visible and no horizontal scroll"
      }
    ]
  },
  {
    "id": "TC018",
    "title": "Role-based permission checks on API endpoints",
    "description": "Verify that all API endpoints enforce role-based access control by returning HTTP 403 unauthorized for users lacking permissions when accessing workshop tasks, fleet management, vehicle data, and timesheets.",
    "category": "security",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Attempt to access vehicle master data API as employee"
      },
      {
        "type": "assertion",
        "description": "Verify HTTP 403 is returned"
      },
      {
        "type": "action",
        "description": "Attempt to modify workshop task comments as unauthorized user"
      },
      {
        "type": "assertion",
        "description": "Verify HTTP 403 is returned"
      },
      {
        "type": "action",
        "description": "Access timesheet approval API as employee"
      },
      {
        "type": "assertion",
        "description": "Verify HTTP 403 is returned"
      }
    ]
  },
  {
    "id": "TC019",
    "title": "Centralized error logging captures exceptions and reports",
    "description": "Verify that uncaught exceptions or logged errors are recorded in centralized logs, daily email summaries are sent, and dashboard monitoring reflects error events with no missed reports.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Trigger an intentional application error or exception (e.g., invalid API call)"
      },
      {
        "type": "assertion",
        "description": "Verify error logged to centralized logger"
      },
      {
        "type": "assertion",
        "description": "Verify error appears in dashboard monitoring UI"
      },
      {
        "type": "action",
        "description": "Check daily email summary reception for logged errors"
      },
      {
        "type": "assertion",
        "description": "Verify error present in email summary"
      }
    ]
  },
  {
    "id": "TC020",
    "title": "Performance benchmark: sub-second workshop task comment drawer open",
    "description": "Verify that the workshop task comments timeline drawer opens in under 1 second after user interaction.",
    "category": "performance",
    "priority": "Medium",
    "steps": [
      {
        "type": "action",
        "description": "Login and open a workshop task list"
      },
      {
        "type": "action",
        "description": "Click to open comments timeline drawer of a task"
      },
      {
        "type": "assertion",
        "description": "Measure elapsed time and verify drawer fully renders within 1 second"
      }
    ]
  },
  {
    "id": "TC021",
    "title": "No console errors or uncaught exceptions during critical flows",
    "description": "Ensure that no console errors or uncaught exceptions occur during user flows including login, task creation, comment CRUD, fleet navigation, and vehicle history viewing.",
    "category": "error handling",
    "priority": "High",
    "steps": [
      {
        "type": "action",
        "description": "Perform key user flows in UI: login, create/edit workshop task, add/delete comment, navigate Fleet tabs, view vehicle history"
      },
      {
        "type": "assertion",
        "description": "Monitor developer console and verify no errors or warnings logged"
      }
    ]
  }
]
