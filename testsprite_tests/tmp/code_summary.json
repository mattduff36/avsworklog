{
  "tech_stack": [
    "TypeScript",
    "JavaScript",
    "Next.js 15.5.7 (App Router)",
    "React 18",
    "Node.js",
    "PostgreSQL",
    "Supabase",
    "React Query (TanStack Query)",
    "Tailwind CSS",
    "Shadcn UI",
    "Radix UI",
    "Zod (validation)",
    "next-pwa (Progressive Web App)",
    "date-fns",
    "Vitest (testing)"
  ],
  "features": [
    {
      "name": "Authentication & Authorization",
      "description": "Supabase-based authentication system with role-based access control (RBAC). Supports employees, managers, and admins with granular permissions.",
      "files": [
        "lib/hooks/useAuth.ts",
        "lib/utils/permissions.ts",
        "lib/supabase/client.ts",
        "lib/supabase/server.ts",
        "middleware.ts",
        "app/(auth)/login/page.tsx",
        "app/(auth)/change-password/page.tsx"
      ]
    },
    {
      "name": "Workshop Tasks Management",
      "description": "Manage workshop tasks with status tracking, categories, subcategories, and comments timeline. Recently enhanced with two-tier taxonomy and freeform comments.",
      "files": [
        "app/(dashboard)/workshop-tasks/page.tsx",
        "app/api/workshop-tasks/tasks/[taskId]/comments/route.ts",
        "app/api/workshop-tasks/comments/[commentId]/route.ts",
        "app/api/workshop-tasks/subcategories/route.ts",
        "app/api/workshop-tasks/subcategories/[id]/route.ts",
        "components/workshop-tasks/TaskCommentsDrawer.tsx",
        "types/database.ts",
        "lib/validation/schemas.ts"
      ]
    },
    {
      "name": "Workshop Task Comments Timeline (Feature 1)",
      "description": "Unified timeline showing status events and freeform comments for workshop tasks. Supports CRUD operations with author verification and manager/admin override.",
      "files": [
        "app/api/workshop-tasks/tasks/[taskId]/comments/route.ts",
        "app/api/workshop-tasks/comments/[commentId]/route.ts",
        "components/workshop-tasks/TaskCommentsDrawer.tsx",
        "supabase/migrations/20260114_workshop_task_comments.sql",
        "scripts/run-workshop-task-comments-migration.ts"
      ]
    },
    {
      "name": "Two-Tier Task Taxonomy (Feature 3)",
      "description": "Hierarchical categorization system for workshop tasks with top-level categories (Service, Repair, Modification, Other) and detailed subcategories. Includes UI styling with colors, icons, and badge styles.",
      "files": [
        "app/api/workshop-tasks/subcategories/route.ts",
        "app/api/workshop-tasks/subcategories/[id]/route.ts",
        "app/(dashboard)/workshop-tasks/page.tsx",
        "supabase/migrations/20260114_workshop_task_taxonomy.sql",
        "scripts/run-workshop-task-taxonomy-migration.ts",
        "types/database.ts"
      ]
    },
    {
      "name": "Fleet Management",
      "description": "Unified fleet management page consolidating maintenance tracking, vehicle master data, categories, and settings. Recently consolidated from separate /maintenance and /admin/vehicles pages.",
      "files": [
        "app/(dashboard)/fleet/page.tsx",
        "app/(dashboard)/maintenance/page.tsx",
        "app/(dashboard)/admin/vehicles/page.tsx",
        "app/(dashboard)/maintenance/components/MaintenanceOverview.tsx",
        "app/(dashboard)/maintenance/components/MaintenanceTable.tsx",
        "app/(dashboard)/maintenance/components/MaintenanceSettings.tsx",
        "lib/hooks/useMaintenance.ts"
      ]
    },
    {
      "name": "Vehicle History Page (Feature 4)",
      "description": "Dedicated vehicle history page with tabs for Maintenance, MOT, Documents, and Notes. Integrates workshop task comments (F1) and two-tier taxonomy (F3) in maintenance history display.",
      "files": [
        "app/(dashboard)/fleet/vehicles/[vehicleId]/history/page.tsx",
        "app/api/maintenance/history/[vehicleId]/route.ts",
        "app/api/maintenance/mot-history/[vehicleId]/route.ts",
        "app/(dashboard)/maintenance/components/MaintenanceHistoryDialog.tsx.deprecated"
      ]
    },
    {
      "name": "Vehicle Maintenance Tracking",
      "description": "Track vehicle tax, MOT, service schedules, and mileage with automated status calculations and alert thresholds. Integrates with DVLA API for automatic data sync.",
      "files": [
        "app/api/maintenance/route.ts",
        "app/api/maintenance/[id]/route.ts",
        "app/api/maintenance/sync-dvla/route.ts",
        "app/api/maintenance/sync-dvla-scheduled/route.ts",
        "lib/hooks/useMaintenance.ts",
        "lib/utils/maintenanceCalculations.ts",
        "types/maintenance.ts"
      ]
    },
    {
      "name": "Vehicle Master Data (Admin)",
      "description": "Manage vehicle records including registration, category, status. Admin and manager access only. Permissions recently expanded from admin-only to admin+manager.",
      "files": [
        "app/api/admin/vehicles/route.ts",
        "app/api/admin/vehicles/[id]/route.ts",
        "app/(dashboard)/fleet/page.tsx"
      ]
    },
    {
      "name": "Timesheets",
      "description": "Employee timesheet submission and management with approval workflows, adjustments, rejections, and payroll report generation.",
      "files": [
        "app/(dashboard)/timesheets/page.tsx",
        "app/(dashboard)/timesheets/new/page.tsx",
        "app/(dashboard)/timesheets/[id]/page.tsx",
        "app/api/timesheets/[id]/adjust/route.ts",
        "app/api/timesheets/[id]/reject/route.ts",
        "app/api/reports/timesheets/payroll/route.ts",
        "app/api/reports/timesheets/summary/route.ts"
      ]
    },
    {
      "name": "Vehicle Inspections",
      "description": "Digital vehicle inspection forms with defect tracking, PDF generation, and compliance reporting.",
      "files": [
        "app/(dashboard)/inspections/page.tsx",
        "app/(dashboard)/inspections/new/page.tsx",
        "app/(dashboard)/inspections/[id]/page.tsx",
        "app/api/inspections/[id]/pdf/route.ts",
        "app/api/reports/inspections/compliance/route.ts",
        "app/api/reports/inspections/defects/route.ts"
      ]
    },
    {
      "name": "RAMS (Risk Assessment Method Statements)",
      "description": "Risk assessment management with digital signatures, visitor sign-offs, email distribution, and PDF export.",
      "files": [
        "app/(dashboard)/rams/page.tsx",
        "app/(dashboard)/rams/[id]/page.tsx",
        "app/(dashboard)/rams/[id]/read/page.tsx",
        "app/api/rams/route.ts",
        "app/api/rams/sign/route.ts",
        "app/api/rams/visitor-sign/route.ts",
        "app/api/rams/[id]/email/route.ts",
        "app/api/rams/[id]/export/route.ts"
      ]
    },
    {
      "name": "Absence Management",
      "description": "Employee absence tracking with allowance management, approval workflows, and reason categorization.",
      "files": [
        "app/(dashboard)/absence/page.tsx",
        "app/(dashboard)/absence/manage/page.tsx",
        "app/(dashboard)/absence/manage/allowances/page.tsx",
        "app/(dashboard)/absence/manage/reasons/page.tsx"
      ]
    },
    {
      "name": "Messages & Notifications",
      "description": "Internal messaging system with blocking messages (password changes, toolbox talks), notifications, and dismissal tracking.",
      "files": [
        "app/api/messages/route.ts",
        "app/api/messages/notifications/route.ts",
        "app/api/messages/pending/route.ts",
        "app/api/messages/[id]/sign/route.ts",
        "app/api/messages/[id]/dismiss/route.ts",
        "components/messages/MessageBlockingCheck.tsx"
      ]
    },
    {
      "name": "User Management (Admin)",
      "description": "Admin interface for managing users, roles, and permissions with password reset capabilities.",
      "files": [
        "app/(dashboard)/admin/users/page.tsx",
        "app/api/admin/users/route.ts",
        "app/api/admin/users/[id]/route.ts",
        "app/api/admin/users/[id]/reset-password/route.ts",
        "app/api/admin/roles/route.ts",
        "app/api/admin/roles/[id]/permissions/route.ts"
      ]
    },
    {
      "name": "Reports & Analytics",
      "description": "Comprehensive reporting for timesheets, inspections, maintenance, and system statistics.",
      "files": [
        "app/(dashboard)/reports/page.tsx",
        "app/api/reports/stats/route.ts",
        "app/api/reports/timesheets/payroll/route.ts",
        "app/api/reports/timesheets/summary/route.ts",
        "app/api/reports/inspections/compliance/route.ts",
        "app/api/reports/inspections/defects/route.ts"
      ]
    },
    {
      "name": "Error Logging & Monitoring",
      "description": "Centralized error logging with daily email summaries and error reporting dashboard.",
      "files": [
        "lib/utils/logger.ts",
        "lib/utils/errorLogging.ts",
        "app/api/errors/report/route.ts",
        "app/api/errors/daily-summary/route.ts",
        "components/ErrorLoggerInit.tsx"
      ]
    },
    {
      "name": "Navigation & Layout",
      "description": "Responsive dashboard layout with navbar, mobile navigation, and permission-based route filtering.",
      "files": [
        "components/layout/DashboardLayoutClient.tsx",
        "components/layout/Navbar.tsx",
        "components/layout/MobileNavBar.tsx",
        "components/layout/DashboardContent.tsx",
        "lib/config/navigation.ts"
      ]
    },
    {
      "name": "Offline Support & PWA",
      "description": "Progressive Web App features with offline support, service worker, and pull-to-refresh.",
      "files": [
        "public/sw-custom.js",
        "public/manifest.json",
        "next.config.ts",
        "components/layout/PullToRefresh.tsx",
        "components/ui/offline-banner.tsx",
        "lib/hooks/useOfflineSync.ts"
      ]
    },
    {
      "name": "UI Components Library",
      "description": "Reusable UI components based on Shadcn UI and Radix UI primitives with Tailwind styling.",
      "files": [
        "components/ui/button.tsx",
        "components/ui/card.tsx",
        "components/ui/dialog.tsx",
        "components/ui/table.tsx",
        "components/ui/tabs.tsx",
        "components/ui/badge.tsx",
        "components/ui/sonner.tsx",
        "components/ui/select.tsx",
        "components/ui/textarea.tsx"
      ]
    },
    {
      "name": "Database Migrations",
      "description": "Supabase database schema migrations with RLS policies, triggers, and indexes.",
      "files": [
        "supabase/migrations/20260114_workshop_task_comments.sql",
        "supabase/migrations/20260114_workshop_task_taxonomy.sql",
        "scripts/run-workshop-task-comments-migration.ts",
        "scripts/run-workshop-task-taxonomy-migration.ts"
      ]
    }
  ]
}
