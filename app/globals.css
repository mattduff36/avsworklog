@import "tailwindcss";

/* Tailwind v4: enable class-based dark variant */
@custom-variant dark (&:where(.dark, .dark *));

/* AVS Squires Brand Colors */
@layer base {
  :root {
    color-scheme: dark;
    
    /* Semantic theme tokens - Dark theme by default */
    --background: 222 47% 11%; /* slate-900 */
    --foreground: 210 40% 98%; /* slate-50 */
    --card: 222 47% 11%; /* slate-900 */
    --card-foreground: 210 40% 98%;
    --popover: 222 47% 11%;
    --popover-foreground: 210 40% 98%;
    
    /* Primary - AVS Signature Yellow */
    --primary: 48 87% 69%;
    --primary-foreground: 222 47% 11%;
    
    /* Secondary - slate-800 */
    --secondary: 217 33% 17%;
    --secondary-foreground: 210 40% 98%;
    
    /* Muted - slate-800 */
    --muted: 217 33% 17%;
    --muted-foreground: 215 20% 65%; /* slate-400 */
    
    /* Accent - slate-800 */
    --accent: 217 33% 17%;
    --accent-foreground: 210 40% 98%;
    
    /* Status colors */
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --success: 142 71% 45%;
    --warning: 38 92% 50%;
    --error: 0 84% 60%;
    
    /* Document Type Colors */
    --timesheet-primary: 210 90% 50%;
    --timesheet-light: 210 100% 96%;
    --timesheet-dark: 210 90% 35%;
    
    --inspection-primary: 30 95% 55%;
    --inspection-light: 30 100% 96%;
    --inspection-dark: 30 95% 40%;
    
    --rams-primary: 142 76% 36%;
    --rams-light: 142 76% 95%;
    --rams-dark: 142 76% 28%;
    
    --absence-primary: 260 60% 50%;
    --absence-light: 260 60% 96%;
    --absence-dark: 260 60% 40%;
    
    --maintenance-primary: 0 84% 60%;
    --maintenance-light: 0 100% 96%;
    --maintenance-dark: 0 84% 45%;
    
    --workshop-primary: 13 37% 48%;
    --workshop-light: 13 37% 96%;
    --workshop-dark: 13 37% 35%;
    
    --report-primary: 150 70% 45%;
    --report-light: 150 100% 96%;
    --report-dark: 150 70% 30%;
    
    --admin-primary: 260 60% 50%;
    --admin-light: 260 100% 96%;
    --admin-dark: 260 60% 35%;
    
    /* UI Elements */
    --border: 217 33% 17%; /* slate-800 */
    --input: 217 33% 17%;
    --ring: 48 87% 69%;
    --radius: 0.625rem;
    
    /* AVS Yellow variants */
    --avs-yellow: 48 87% 69%;
    --avs-yellow-hover: 48 73% 56%;
    --avs-yellow-light: 48 100% 94%;
  }

  .dark {
    /* Dark mode (same as root for single-theme approach) */
    --background: 222 47% 11%;
    --foreground: 210 40% 98%;
    --card: 222 47% 11%;
    --card-foreground: 210 40% 98%;
    --popover: 222 47% 11%;
    --popover-foreground: 210 40% 98%;
    --primary: 48 87% 69%;
    --primary-foreground: 222 47% 11%;
    --secondary: 217 33% 17%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217 33% 17%;
    --muted-foreground: 215 20% 65%;
    --accent: 217 33% 17%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217 33% 17%;
    --input: 217 33% 17%;
    --ring: 48 87% 69%;
    --success: 142 71% 45%;
    --warning: 38 92% 50%;
    --error: 0 84% 60%;
  }

  /* Module-aware accent colors */
  [data-accent="timesheets"] {
    --primary: var(--timesheet-primary);
    --primary-foreground: 210 40% 98%; /* light text for readability */
    --ring: var(--timesheet-primary);
  }

  [data-accent="inspections"] {
    --primary: var(--inspection-primary);
    --primary-foreground: 210 40% 98%;
    --ring: var(--inspection-primary);
  }

  [data-accent="rams"] {
    --primary: var(--rams-primary);
    --primary-foreground: 210 40% 98%;
    --ring: var(--rams-primary);
  }

  [data-accent="absence"] {
    --primary: var(--absence-primary);
    --primary-foreground: 210 40% 98%;
    --ring: var(--absence-primary);
  }

  [data-accent="maintenance"] {
    --primary: var(--maintenance-primary);
    --primary-foreground: 210 40% 98%;
    --ring: var(--maintenance-primary);
  }

  [data-accent="workshop"] {
    --primary: var(--workshop-primary);
    --primary-foreground: 210 40% 98%;
    --ring: var(--workshop-primary);
  }

  [data-accent="reports"] {
    --primary: var(--report-primary);
    --primary-foreground: 210 40% 98%;
    --ring: var(--report-primary);
  }

  /* Brand (yellow) remains the default for non-module pages */
  [data-accent="brand"] {
    --primary: 48 87% 69%;
    --primary-foreground: 222 47% 11%; /* dark text for yellow */
    --ring: 48 87% 69%;
  }
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }
  
  body {
    background: linear-gradient(135deg, rgb(15 23 42) 0%, rgb(30 41 59) 50%, rgb(51 65 85) 100%);
    background-attachment: fixed;
    color: hsl(var(--foreground));
    font-family: var(--font-inter), Inter, system-ui, -apple-system, sans-serif;
    font-feature-settings: "rlig" 1, "calt" 1;
    position: relative;
  }

  /* Placeholder text styling - ensure grey/muted appearance for empty fields */
  input::placeholder,
  textarea::placeholder,
  input::-webkit-input-placeholder,
  textarea::-webkit-input-placeholder,
  input::-moz-placeholder,
  textarea::-moz-placeholder,
  input:-ms-input-placeholder,
  textarea:-ms-input-placeholder {
    color: hsl(var(--muted-foreground)) !important;
    opacity: 1 !important;
  }

  /* Grid pattern removed - keeping plain gradient background */
}

/* Module-specific color utilities */
@layer utilities {
  .bg-avs-yellow {
    background-color: #F1D64A;
  }
  
  .bg-avs-yellow-hover:hover {
    background-color: #d1b82f;
  }
  
  .text-avs-yellow {
    color: #F1D64A;
  }
  
  .border-avs-yellow {
    border-color: #F1D64A;
  }
  
  /* Timesheet */
  .bg-timesheet { background-color: hsl(var(--timesheet-primary)); }
  .bg-timesheet-light { background-color: hsl(var(--timesheet-light)); }
  .bg-timesheet-dark { background-color: hsl(var(--timesheet-dark)); }
  .text-timesheet { color: hsl(var(--timesheet-primary)); }
  .border-timesheet { border-color: hsl(var(--timesheet-primary)); }
  
  /* Inspection */
  .bg-inspection { background-color: hsl(var(--inspection-primary)); }
  .bg-inspection-light { background-color: hsl(var(--inspection-light)); }
  .bg-inspection-dark { background-color: hsl(var(--inspection-dark)); }
  .text-inspection { color: hsl(var(--inspection-primary)); }
  .border-inspection { border-color: hsl(var(--inspection-primary)); }
  
  /* Report */
  .bg-report { background-color: hsl(var(--report-primary)); }
  .bg-report-light { background-color: hsl(var(--report-light)); }
  .bg-report-dark { background-color: hsl(var(--report-dark)); }
  .text-report { color: hsl(var(--report-primary)); }
  .border-report { border-color: hsl(var(--report-primary)); }
  
  /* Admin */
  .bg-admin { background-color: hsl(var(--admin-primary)); }
  .bg-admin-light { background-color: hsl(var(--admin-light)); }
  .bg-admin-dark { background-color: hsl(var(--admin-dark)); }
  .text-admin { color: hsl(var(--admin-primary)); }
  .border-admin { border-color: hsl(var(--admin-primary)); }
  
  /* RAMS */
  .bg-rams { background-color: hsl(var(--rams-primary)); }
  .bg-rams-light { background-color: hsl(var(--rams-light)); }
  .bg-rams-dark { background-color: hsl(var(--rams-dark)); }
  .text-rams { color: hsl(var(--rams-primary)); }
  .border-rams { border-color: hsl(var(--rams-primary)); }
  
  /* Absence */
  .bg-absence { background-color: hsl(var(--absence-primary)); }
  .bg-absence-light { background-color: hsl(var(--absence-light)); }
  .bg-absence-dark { background-color: hsl(var(--absence-dark)); }
  .text-absence { color: hsl(var(--absence-primary)); }
  .border-absence { border-color: hsl(var(--absence-primary)); }
  
  /* Maintenance */
  .bg-maintenance { background-color: hsl(var(--maintenance-primary)); }
  .bg-maintenance-light { background-color: hsl(var(--maintenance-light)); }
  .bg-maintenance-dark { background-color: hsl(var(--maintenance-dark)); }
  .text-maintenance { color: hsl(var(--maintenance-primary)); }
  .border-maintenance { border-color: hsl(var(--maintenance-primary)); }
  
  /* Workshop */
  .bg-workshop { background-color: hsl(var(--workshop-primary)); }
  .bg-workshop-light { background-color: hsl(var(--workshop-light)); }
  .bg-workshop-dark { background-color: hsl(var(--workshop-dark)); }
  .text-workshop { color: hsl(var(--workshop-primary)); }
  .border-workshop { border-color: hsl(var(--workshop-primary)); }
  
  /* Tab styling */
  [role="tab"][data-state="active"] {
    background-color: hsl(var(--primary)) !important;
    border-bottom: 2px solid hsl(var(--primary)) !important;
  }
  
  [role="tab"][data-state="active"],
  [role="tab"][data-state="active"] *,
  [role="tab"][data-state="active"] svg,
  [role="tab"][data-state="active"] span {
    color: hsl(var(--primary-foreground)) !important;
  }
  
  [role="tab"][data-state="active"][data-tab="toolbox-talk"] {
    background-color: rgb(220 38 38) !important;
    border-bottom-color: rgb(220 38 38) !important;
  }
  
  [role="tab"][data-state="active"][data-tab="toolbox-talk"],
  [role="tab"][data-state="active"][data-tab="toolbox-talk"] * {
    color: white !important;
  }
}

/* Debug-specific styling */
.debug-red {
  color: rgb(239 68 68) !important; /* red-500 */
}

.debug-bg {
  background-color: rgba(220, 38, 38, 0.1) !important;
  border-color: rgba(220, 38, 38, 0.3) !important;
}

/* Custom scrollbar */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: #f1f1f1; }
::-webkit-scrollbar-thumb { background: #F1D64A; border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #d1b82f; }

/* Smooth scrolling */
html { scroll-behavior: smooth; }

/*
 * MODAL & DIALOG STYLING
 */
[data-radix-dialog-overlay],
[data-radix-alert-dialog-overlay] {
  background: rgba(0, 0, 0, 0.5) !important;
  z-index: 50 !important;
}

[data-radix-dialog-content],
[data-radix-alert-dialog-content],
[role="dialog"],
[role="alertdialog"] {
  background: hsl(var(--card)) !important;
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 0.5rem !important;
  color: hsl(var(--card-foreground)) !important;
  z-index: 50 !important;
}

/* Dropdowns appear above modals */
[data-radix-select-content],
[data-radix-popover-content] {
  z-index: 999 !important;
  position: fixed !important;
}

/* iOS Safari input width fixes */
input[type="time"],
input[type="date"] {
  max-width: 100% !important;
  width: 100% !important;
  box-sizing: border-box !important;
  display: block !important;
  -webkit-appearance: none;
  appearance: none;
}

input[type="time"]::-webkit-datetime-edit,
input[type="date"]::-webkit-datetime-edit {
  max-width: 100% !important;
  width: 100% !important;
  padding: 0 !important;
  overflow: hidden;
  display: block;
}

input[type="time"]::-webkit-datetime-edit-fields-wrapper,
input[type="date"]::-webkit-datetime-edit-fields-wrapper {
  max-width: 100% !important;
  width: 100% !important;
  padding: 0 !important;
}

input[type="time"]::-webkit-datetime-edit-text,
input[type="date"]::-webkit-datetime-edit-text {
  padding: 0 2px;
}

input[type="time"]::-webkit-datetime-edit-hour-field,
input[type="time"]::-webkit-datetime-edit-minute-field,
input[type="date"]::-webkit-datetime-edit-day-field,
input[type="date"]::-webkit-datetime-edit-month-field,
input[type="date"]::-webkit-datetime-edit-year-field {
  padding: 0 !important;
}

/* Mobile View - 20% scale reduction */
@media (max-width: 768px) {
  html { font-size: 12.8px; }
  
  .h-10 { height: 2rem !important; }
  .h-12 { height: 2.4rem !important; }
  .h-14 { height: 2.8rem !important; }
  
  .text-base { font-size: 0.8rem !important; }
  .text-lg { font-size: 0.9rem !important; }
  .text-xl { font-size: 1rem !important; }
  .text-2xl { font-size: 1.2rem !important; }
  .text-3xl { font-size: 1.5rem !important; }
  .text-xs { font-size: 0.6rem !important; }
  .text-sm { font-size: 0.7rem !important; }
  
  .p-3 { padding: 0.6rem !important; }
  .p-4 { padding: 0.8rem !important; }
  .p-5 { padding: 1rem !important; }
  .p-6 { padding: 1.2rem !important; }
  .p-8 { padding: 1.6rem !important; }
  
  .py-2 { padding-top: 0.4rem !important; padding-bottom: 0.4rem !important; }
  .py-3 { padding-top: 0.6rem !important; padding-bottom: 0.6rem !important; }
  .py-4 { padding-top: 0.8rem !important; padding-bottom: 0.8rem !important; }
  
  .px-3 { padding-left: 0.6rem !important; padding-right: 0.6rem !important; }
  .px-4 { padding-left: 0.8rem !important; padding-right: 0.8rem !important; }
  .px-6 { padding-left: 1.2rem !important; padding-right: 1.2rem !important; }
  
  .gap-2 { gap: 0.4rem !important; }
  .gap-3 { gap: 0.6rem !important; }
  .gap-4 { gap: 0.8rem !important; }
  .gap-6 { gap: 1.2rem !important; }
  
  .mb-2 { margin-bottom: 0.4rem !important; }
  .mb-3 { margin-bottom: 0.6rem !important; }
  .mb-4 { margin-bottom: 0.8rem !important; }
  .mb-6 { margin-bottom: 1.2rem !important; }
  .mb-8 { margin-bottom: 1.6rem !important; }
  
  .mt-2 { margin-top: 0.4rem !important; }
  .mt-4 { margin-top: 0.8rem !important; }
  .mt-6 { margin-top: 1.2rem !important; }
  
  .h-4 { height: 0.8rem !important; }
  .w-4 { width: 0.8rem !important; }
  .h-5 { height: 1rem !important; }
  .w-5 { width: 1rem !important; }
  .h-6 { height: 1.2rem !important; }
  .w-6 { width: 1.2rem !important; }
  .h-8 { height: 1.6rem !important; }
  .w-8 { width: 1.6rem !important; }
  .w-10 { width: 2rem !important; }
  
  .space-y-2 > * + * { margin-top: 0.4rem !important; }
  .space-y-3 > * + * { margin-top: 0.6rem !important; }
  .space-y-4 > * + * { margin-top: 0.8rem !important; }
  .space-y-6 > * + * { margin-top: 1.2rem !important; }
  
  .rounded-lg { border-radius: 0.4rem !important; }
  .rounded-xl { border-radius: 0.6rem !important; }
  
  .border-2 { border-width: 1.6px !important; }
}

/* Selectable Card Component */
.selectable-card {
  transition: all 0.2s ease;
  cursor: pointer;
  border: 2px solid hsl(var(--border));
  background-color: hsl(var(--muted));
}

.selectable-card:hover:not(.selectable-card-disabled) {
  border-color: hsl(var(--accent));
  background-color: hsl(var(--accent));
}

.selectable-card-selected {
  border-color: currentColor !important;
}

.selectable-card-selected.selectable-card-rams {
  background-color: rgba(34, 197, 94, 0.15) !important;
  border-color: rgb(34 197 94) !important;
}

.selectable-card-selected.selectable-card-rams .selectable-card-icon {
  color: rgb(34 197 94) !important;
}

.selectable-card-selected.selectable-card-timesheet {
  background-color: rgba(59, 130, 246, 0.15) !important;
  border-color: rgb(59 130 246) !important;
}

.selectable-card-selected.selectable-card-inspection {
  background-color: rgba(249, 115, 22, 0.15) !important;
  border-color: rgb(249 115 22) !important;
}

.selectable-card-selected.selectable-card-absence {
  background-color: rgba(168, 85, 247, 0.15) !important;
  border-color: rgb(168 85 247) !important;
}

.selectable-card-selected.selectable-card-default {
  background-color: rgba(241, 214, 74, 0.15) !important;
  border-color: rgb(241 214 74) !important;
}

.selectable-card-disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.selectable-card-locked {
  opacity: 0.7;
  cursor: default;
}

.selectable-card-locked .selectable-card-lock-icon {
  color: rgb(34 197 94) !important;
}

/* Primary (yellow) buttons get dark text */
.bg-primary,
.bg-primary *,
button.bg-primary,
button.bg-primary * {
  color: hsl(var(--primary-foreground)) !important;
}

/* Parent cards (sitting directly on background) - more opaque borders */
/* Targets cards with border-border class that are direct children of page containers */
.space-y-6 > .rounded-lg.border,
.space-y-6 > .border-border,
.space-y-6 > [data-slot="card"],
.space-y-6 > div > .rounded-lg.border,
.space-y-6 > div > .border-border,
.space-y-6 > div > [data-slot="card"],
.max-w-6xl > .rounded-lg.border,
.max-w-6xl > [data-slot="card"],
.max-w-5xl > .rounded-lg.border,
.max-w-5xl > [data-slot="card"] {
  border-color: rgba(148, 163, 184, 0.4) !important; /* slate-400 at 40% opacity */
}

/* Coloured cards (blue, purple, green, etc) - also more opaque borders */
[class*="border-blue-500"],
[class*="border-purple-500"],
[class*="border-green-500"],
[class*="border-amber-500"],
[class*="border-workshop"] {
  border-color: rgba(148, 163, 184, 0.4) !important;
}

/* Override with actual colors but at higher opacity */
[class*="border-blue-500\/30"] {
  border-color: rgba(59, 130, 246, 0.4) !important; /* blue-500 at 40% */
}

[class*="border-purple-500\/30"] {
  border-color: rgba(168, 85, 247, 0.4) !important; /* purple-500 at 40% */
}

[class*="border-green-500\/30"] {
  border-color: rgba(34, 197, 94, 0.4) !important; /* green-500 at 40% */
}

/* Tab styling - consistent height and appearance across all tabs */
[role="tablist"] {
  margin-bottom: 1rem !important; /* Consistent gap under all tab bars */
}

[role="tablist"] [role="tab"] {
  border-radius: 0 !important;
  box-sizing: border-box !important;
  height: 2.25rem !important; /* 36px - consistent height for all tabs */
  border-bottom: 2px solid transparent !important; /* Same border as active, but transparent */
}

/* Inactive tabs - consistent visible background across all pages */
[role="tablist"] [role="tab"]:not([data-state="active"]) {
  background-color: rgba(51, 65, 85, 0.5) !important; /* slate-700 at 50% */
}

[role="tablist"] [role="tab"]:first-child {
  border-top-left-radius: 0.375rem !important;
  border-bottom-left-radius: 0.375rem !important;
}

[role="tablist"] [role="tab"]:last-child {
  border-top-right-radius: 0.375rem !important;
  border-bottom-right-radius: 0.375rem !important;
}

/* Animations */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
  20%, 40%, 60%, 80% { transform: translateX(10px); }
}

.animate-shake {
  animation: shake 0.5s ease-in-out;
}

@keyframes tile-pop-in {
  0% { opacity: 0; transform: scale(0.8); }
  60% { transform: scale(1.02); }
  100% { opacity: 1; transform: scale(1); }
}

.animate-tile-pop {
  animation: tile-pop-in 0.35s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  opacity: 0;
}

@keyframes card-fade-in {
  0% { opacity: 0; transform: translateY(8px); }
  100% { opacity: 1; transform: translateY(0); }
}

.animate-card-fade {
  animation: card-fade-in 0.4s ease-out forwards;
  opacity: 0;
}
